basePath: /
definitions:
  models.DonatePlanRequest:
    description: Request payload for donating a swim training plan to the system
    properties:
      description:
        example: A comprehensive training plan for improving freestyle technique
        type: string
      language:
        allOf:
        - $ref: '#/definitions/models.Language'
        description: Language specifies the language of the training plan
        example: en
      table:
        description: A structured training plan table containing exercise rows
        items:
          $ref: '#/definitions/models.Row'
        type: array
      title:
        example: Advanced Freestyle Training
        type: string
    required:
    - table
    type: object
  models.GeneratePromptRequest:
    description: Request payload for generating a prompt for swim training plan creation
    properties:
      language:
        allOf:
        - $ref: '#/definitions/models.Language'
        example: en
    required:
    - language
    type: object
  models.GeneratedPromptResponse:
    description: Response containing the generated prompt for swim training plan creation
    properties:
      prompt:
        example: Generate a swim training plan for improving freestyle technique
        type: string
    type: object
  models.HealthStatus:
    description: Health status of the service and its components
    properties:
      components:
        additionalProperties:
          type: string
        type: object
      schema_version:
        type: integer
      status:
        type: string
      timestamp:
        type: string
    type: object
  models.Language:
    enum:
    - en
    - de
    type: string
    x-enum-varnames:
    - LanguageEN
    - LanguageDE
  models.PlanToPDFRequest:
    description: Request payload for exporting a training plan to PDF format
    properties:
      description:
        example: A comprehensive training plan for improving freestyle technique
        type: string
      horizontal:
        description: Horizontal indicates if the PDF should be in landscape orientation
        example: false
        type: boolean
      language:
        allOf:
        - $ref: '#/definitions/models.Language'
        description: Language specifies the language for the PDF content
        example: en
      large_font:
        description: LargeFont indicates if the PDF should use a larger font size
        example: true
        type: boolean
      plan_id:
        description: PlanID identifies the training plan to be exported
        example: plan_123
        type: string
      table:
        description: A structured training plan table containing exercise rows
        items:
          $ref: '#/definitions/models.Row'
        type: array
      title:
        example: Advanced Freestyle Training
        type: string
    required:
    - description
    - table
    - title
    type: object
  models.PlanToPDFResponse:
    description: Response containing the URI to the generated PDF file
    properties:
      uri:
        example: https://storage.googleapis.com/bucket/plans/plan_123.pdf
        type: string
    type: object
  models.QueryRequest:
    description: Request payload for querying swim training plans from the RAG system
    properties:
      content:
        description: Content describes what kind of training plan is needed
        example: I need a training plan for improving my freestyle technique
        type: string
      filter:
        additionalProperties: {}
        description: Filter allows filtering plans by metadata like difficulty or
          stroke type
        type: object
      language:
        allOf:
        - $ref: '#/definitions/models.Language'
        description: Language specifies the language for the response
        example: en
      method:
        description: Method can be either 'choose' (select existing plan) or 'generate'
          (create new plan)
        enum:
        - choose
        - generate
        example: generate
        type: string
      pool_length:
        description: PoolLength specifies the pool length for the training plan
    required:
    - content
    - method
    type: object
  models.RAGResponse:
    description: Response containing a generated or selected swim training plan
    properties:
      description:
        example: A comprehensive training plan for improving freestyle technique
        type: string
      plan_id:
        description: PlanID is the identifier of the training plan
        example: plan_123
        type: string
      table:
        description: A structured training plan table containing exercise rows
        items:
          $ref: '#/definitions/models.Row'
        type: array
      title:
        example: Advanced Freestyle Training
        type: string
    type: object
  models.Row:
    description: A single exercise entry with amount, distance, breaks, content, intensity
      and total volume
    properties:
      Amount:
        example: 4
        type: integer
      Break:
        example: "20"
        type: string
      Content:
        example: Freestyle swim
        type: string
      Distance:
        example: 100
        type: integer
      Intensity:
        example: Easy
        type: string
      Multiplier:
        example: x
        type: string
      Sum:
        example: 400
        type: integer
    type: object
  models.UpsertPlanRequest:
    description: Request payload for upserting a swim training plan to the system
    properties:
      description:
        example: A comprehensive training plan for improving freestyle technique
        type: string
      plan_id:
        description: PlanID identifies the training plan to be upserted
        example: plan_123
        type: string
      table:
        description: A structured training plan table containing exercise rows
        items:
          $ref: '#/definitions/models.Row'
        type: array
      title:
        example: Advanced Freestyle Training
        type: string
    required:
    - description
    - table
    - title
    type: object
  models.UpsertPlanResponse:
    description: Response containing the upserted swim training plan
    properties:
      plan_id:
        example: plan_123
        type: string
    type: object
externalDocs:
  description: OpenAPI
  url: https://swagger.io/resources/open-api/
info:
  contact: {}
  description: A REST API for swim training plan management with RAG capabilities
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  title: Swim Gen API
  version: "1.0"
paths:
  /add:
    post:
      consumes:
      - application/json
      description: Upload and store a new user created swim training plan in the RAG
        system
      parameters:
      - description: Training plan data
        in: body
        name: plan
        required: true
        schema:
          $ref: '#/definitions/models.DonatePlanRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Plan added successfully
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: Donate a new training plan
      tags:
      - Donation
  /export-pdf:
    post:
      consumes:
      - application/json
      description: Generate and download a PDF version of a training plan
      parameters:
      - description: Training plan data to export
        in: body
        name: plan
        required: true
        schema:
          $ref: '#/definitions/models.PlanToPDFRequest'
      produces:
      - application/json
      responses:
        "200":
          description: PDF export response with URI
          schema:
            $ref: '#/definitions/models.PlanToPDFResponse'
        "400":
          description: Bad request
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: Export training plan to PDF
      tags:
      - Training Plans
  /generate-prompt:
    post:
      consumes:
      - application/json
      description: Generate a prompt for the LLM based on the provided language
      parameters:
      - description: Request to generate a prompt
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.GeneratePromptRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Generated prompt response
          schema:
            $ref: '#/definitions/models.GeneratedPromptResponse'
        "400":
          description: Bad request
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      summary: Generate a prompt for the LLM
      tags:
      - Training Plans
  /health:
    get:
      description: Returns the health status of the API including database and vector
        store connectivity
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.HealthStatus'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/models.HealthStatus'
      summary: Comprehensive health check
      tags:
      - Health
  /health-basic:
    get:
      description: Returns a simple OK response for basic health monitoring
      produces:
      - text/plain
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Basic health check
      tags:
      - Health
  /query:
    post:
      consumes:
      - application/json
      description: Query the RAG system for relevant training plans based on input
      parameters:
      - description: Query parameters
        in: body
        name: query
        required: true
        schema:
          $ref: '#/definitions/models.QueryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Query results
          schema:
            $ref: '#/definitions/models.RAGResponse'
        "400":
          description: Bad request
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: Query training plans
      tags:
      - Training Plans
  /scrape:
    get:
      description: Scrape and import training plans from external websites
      parameters:
      - description: URL to scrape training plans from
        in: query
        name: url
        required: true
        type: string
      produces:
      - text/plain
      responses:
        "200":
          description: Scraping completed successfully
          schema:
            type: string
        "400":
          description: Bad request - Missing url parameter
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      summary: Scrape training plans from web
      tags:
      - Web Scraping
  /upsert-plan:
    post:
      consumes:
      - application/json
      description: Update an existing training plan if it belongs to the user, or
        insert a new one
      parameters:
      - description: Request to upsert a training plan
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.UpsertPlanRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Plan ID of the upserted training plan
          schema:
            $ref: '#/definitions/models.UpsertPlanResponse'
        "400":
          description: Bad request
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: Update or insert a training plan into a user's history
      tags:
      - Training Plans
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and the JWT.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
